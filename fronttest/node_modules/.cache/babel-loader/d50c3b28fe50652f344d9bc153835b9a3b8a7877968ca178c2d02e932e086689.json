{"ast":null,"code":"export const createMediaDevices = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n  return () => wrapSubscribeFunction(observer => {\n    if (window === null || window.navigator === undefined || window.navigator.mediaDevices === undefined || window.navigator.mediaDevices.enumerateDevices === undefined) {\n      return emitNotSupportedError(observer);\n    }\n    let isActive = true;\n    const enumerateDevices = () => {\n      window.navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        if (isActive) {\n          observer.next(mediaDevices);\n        }\n      }, err => {\n        if (isActive) {\n          unsubscribe();\n          observer.error(err);\n        }\n      });\n    };\n    const unsubscribe = () => {\n      isActive = false;\n      window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n    };\n    enumerateDevices();\n    window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n    return unsubscribe;\n  });\n};","map":{"version":3,"names":["createMediaDevices","emitNotSupportedError","window","wrapSubscribeFunction","observer","navigator","undefined","mediaDevices","enumerateDevices","isActive","then","next","err","unsubscribe","error","removeEventListener","addEventListener"],"sources":["/Users/asyuyukiume/AI学習/議事録　テスト/fronttest/node_modules/subscribable-things/src/factories/media-devices.ts"],"sourcesContent":["import { TMediaDevicesFactory } from '../types';\n\nexport const createMediaDevices: TMediaDevicesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.mediaDevices === undefined ||\n                window.navigator.mediaDevices.enumerateDevices === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            let isActive = true;\n\n            const enumerateDevices = () => {\n                window.navigator.mediaDevices.enumerateDevices().then(\n                    (mediaDevices) => {\n                        if (isActive) {\n                            observer.next(mediaDevices);\n                        }\n                    },\n                    (err) => {\n                        if (isActive) {\n                            unsubscribe();\n\n                            observer.error(err);\n                        }\n                    }\n                );\n            };\n            const unsubscribe = () => {\n                isActive = false;\n                window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n            };\n\n            enumerateDevices();\n            window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n\n            return unsubscribe;\n        });\n};\n"],"mappings":"AAEA,OAAO,MAAMA,kBAAkB,GAAyBA,CAACC,qBAAqB,EAAEC,MAAM,EAAEC,qBAAqB,KAAI;EAC7G,OAAO,MACHA,qBAAqB,CAAEC,QAAQ,IAAI;IAC/B,IACIF,MAAM,KAAK,IAAI,IACfA,MAAM,CAACG,SAAS,KAAKC,SAAS,IAC9BJ,MAAM,CAACG,SAAS,CAACE,YAAY,KAAKD,SAAS,IAC3CJ,MAAM,CAACG,SAAS,CAACE,YAAY,CAACC,gBAAgB,KAAKF,SAAS,EAC9D;MACE,OAAOL,qBAAqB,CAACG,QAAQ,CAAC;IAC1C;IAEA,IAAIK,QAAQ,GAAG,IAAI;IAEnB,MAAMD,gBAAgB,GAAGA,CAAA,KAAK;MAC1BN,MAAM,CAACG,SAAS,CAACE,YAAY,CAACC,gBAAgB,EAAE,CAACE,IAAI,CAChDH,YAAY,IAAI;QACb,IAAIE,QAAQ,EAAE;UACVL,QAAQ,CAACO,IAAI,CAACJ,YAAY,CAAC;QAC/B;MACJ,CAAC,EACAK,GAAG,IAAI;QACJ,IAAIH,QAAQ,EAAE;UACVI,WAAW,EAAE;UAEbT,QAAQ,CAACU,KAAK,CAACF,GAAG,CAAC;QACvB;MACJ,CAAC,CACJ;IACL,CAAC;IACD,MAAMC,WAAW,GAAGA,CAAA,KAAK;MACrBJ,QAAQ,GAAG,KAAK;MAChBP,MAAM,CAACG,SAAS,CAACE,YAAY,CAACQ,mBAAmB,CAAC,cAAc,EAAEP,gBAAgB,CAAC;IACvF,CAAC;IAEDA,gBAAgB,EAAE;IAClBN,MAAM,CAACG,SAAS,CAACE,YAAY,CAACS,gBAAgB,CAAC,cAAc,EAAER,gBAAgB,CAAC;IAEhF,OAAOK,WAAW;EACtB,CAAC,CAAC;AACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}