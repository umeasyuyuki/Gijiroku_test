{"ast":null,"code":"export const createMidiOutputs = wrapSubscribeFunction => {\n  return midiAccess => wrapSubscribeFunction(observer => {\n    let midiOutputs = Array.from(midiAccess.outputs.values());\n    const emitMidiOutputs = () => {\n      const midiAccessOutputs = midiAccess.outputs;\n      if (midiOutputs.length !== midiAccessOutputs.size || midiOutputs.some(({\n        id\n      }) => !midiAccessOutputs.has(id))) {\n        midiOutputs = Array.from(midiAccessOutputs.values());\n        observer.next(midiOutputs);\n      }\n    };\n    observer.next(midiOutputs);\n    midiAccess.addEventListener('statechange', emitMidiOutputs);\n    return () => midiAccess.removeEventListener('statechange', emitMidiOutputs);\n  });\n};","map":{"version":3,"names":["createMidiOutputs","wrapSubscribeFunction","midiAccess","observer","midiOutputs","Array","from","outputs","values","emitMidiOutputs","midiAccessOutputs","length","size","some","id","has","next","addEventListener","removeEventListener"],"sources":["/Users/asyuyukiume/AI学習/議事録　テスト/fronttest/node_modules/subscribable-things/src/factories/midi-outputs.ts"],"sourcesContent":["import { TMidiOutputsFactory } from '../types';\n\nexport const createMidiOutputs: TMidiOutputsFactory = (wrapSubscribeFunction) => {\n    return (midiAccess) =>\n        wrapSubscribeFunction((observer) => {\n            let midiOutputs = Array.from(midiAccess.outputs.values());\n\n            const emitMidiOutputs = () => {\n                const midiAccessOutputs = midiAccess.outputs;\n\n                if (midiOutputs.length !== midiAccessOutputs.size || midiOutputs.some(({ id }) => !midiAccessOutputs.has(id))) {\n                    midiOutputs = Array.from(midiAccessOutputs.values());\n\n                    observer.next(midiOutputs);\n                }\n            };\n\n            observer.next(midiOutputs);\n            midiAccess.addEventListener('statechange', emitMidiOutputs);\n\n            return () => midiAccess.removeEventListener('statechange', emitMidiOutputs);\n        });\n};\n"],"mappings":"AAEA,OAAO,MAAMA,iBAAiB,GAAyBC,qBAAqB,IAAI;EAC5E,OAAQC,UAAU,IACdD,qBAAqB,CAAEE,QAAQ,IAAI;IAC/B,IAAIC,WAAW,GAAGC,KAAK,CAACC,IAAI,CAACJ,UAAU,CAACK,OAAO,CAACC,MAAM,EAAE,CAAC;IAEzD,MAAMC,eAAe,GAAGA,CAAA,KAAK;MACzB,MAAMC,iBAAiB,GAAGR,UAAU,CAACK,OAAO;MAE5C,IAAIH,WAAW,CAACO,MAAM,KAAKD,iBAAiB,CAACE,IAAI,IAAIR,WAAW,CAACS,IAAI,CAAC,CAAC;QAAEC;MAAE,CAAE,KAAK,CAACJ,iBAAiB,CAACK,GAAG,CAACD,EAAE,CAAC,CAAC,EAAE;QAC3GV,WAAW,GAAGC,KAAK,CAACC,IAAI,CAACI,iBAAiB,CAACF,MAAM,EAAE,CAAC;QAEpDL,QAAQ,CAACa,IAAI,CAACZ,WAAW,CAAC;MAC9B;IACJ,CAAC;IAEDD,QAAQ,CAACa,IAAI,CAACZ,WAAW,CAAC;IAC1BF,UAAU,CAACe,gBAAgB,CAAC,aAAa,EAAER,eAAe,CAAC;IAE3D,OAAO,MAAMP,UAAU,CAACgB,mBAAmB,CAAC,aAAa,EAAET,eAAe,CAAC;EAC/E,CAAC,CAAC;AACV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}